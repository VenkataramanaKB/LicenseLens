<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>API Data Display</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }
      .content {
        max-width: 600px;
        margin: auto;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 8px;
      }
      .loading {
        font-size: 18px;
        color: #888;
      }
      .error {
        color: red;
      }
      .input-container {
        margin-bottom: 20px;
        text-align: center;
      }
      input[type="text"] {
        padding: 10px;
        width: 80%;
        border: 1px solid #ccc;
        border-radius: 4px;
        margin-right: 10px;
      }
      button {
        padding: 10px 20px;
        background-color: #4caf50;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }
      button:hover {
        background-color: #45a049;
      }
    </style>
  </head>
  <body>
    <div class="content">
      <h1>Software License Information</h1>
      <div class="input-container">
        <input
          type="text"
          id="softwareInput"
          placeholder="Enter software name..."
        />
        <button onclick="displayData()">Fetch Data</button>
      </div>
      <div id="data"></div>
      <div id="loading" class="loading" style="display: none">Loading...</div>
    </div>

    <script>
      async function fetchData(input) {
        try {
          const response = await fetch(
            `https://license-finder-gamma.vercel.app/api/${encodeURIComponent(
              input
            )}`
          );
          if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
          }
          const data = await response.json();
          return data;
        } catch (error) {
          console.error("API Error:", error.message);
          throw error;
        }
      }

      async function displayData() {
        const input = document.getElementById("softwareInput").value.trim();
        const dataDiv = document.getElementById("data");
        const loadingDiv = document.getElementById("loading");
        if (!input) {
          dataDiv.innerHTML =
            '<div class="error">Please enter a software name.</div>';
          return;
        }
        loadingDiv.style.display = "block";
        dataDiv.innerHTML = "";
        try {
          const data = await fetchData(input);
          loadingDiv.style.display = "none";
          dataDiv.innerHTML = `<strong>Software:</strong> ${
            data.software || "Unknown"
          }<br>
                               <strong>License:</strong> ${
                                 data.license || "Not specified"
                               }<br>
                               <strong>Explanation:</strong> ${
                                 data.explanation || "No details available."
                               }`;
        } catch (error) {
          loadingDiv.style.display = "none";
          dataDiv.innerHTML = `<div class="error">Error fetching data: ${error.message}</div>`;
        }
      }

      window.onload = function () {
        document.getElementById("softwareInput").value = "mongo";
        displayData();
      };
    </script>
  </body>
</html>
